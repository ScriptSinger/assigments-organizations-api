# Справочник организаций — REST API

## Описание проекта

Данный проект реализует REST API для справочника **Организаций**, **Зданий** и **Видов деятельности**.  
API позволяет выполнять поиск и фильтрацию организаций по разным параметрам, включая вложенную классификацию деятельности, географические координаты зданий и названия организаций.

## Функциональные возможности

- Получение списка организаций, расположенных в конкретном здании
- Поиск организаций по виду деятельности с поддержкой дерева вложенности (максимум 3 уровня)
- Поиск организаций, находящихся в заданном радиусе на карте
- Получение подробной информации об организации по ID
- Поиск организаций по названию
- Защита API с помощью статического API-ключа
- Ограничение уровня вложенности видов деятельности тремя уровнями

## Технологии и инструменты

- PHP 8.x, Laravel 12
- MySQL (через Docker Sail)
- Docker (Sail для локального запуска)
- Swagger UI (документация API)
- Postman (для тестирования)

## Архитектура

- API построено на базе REST
- Использование Pipeline для фильтрации запросов
- Вложенные виды деятельности с ограничением по глубине (3 уровня)
- Middleware для авторизации через API-ключ
- Сидеры для наполнения базы тестовыми данными

## Установка и запуск

1. Клонируйте репозиторий: `git clone <URL_репозитория> cd <папка_проекта>`
2. Скопируйте `.env.example` в `.env` и настройте при необходимости параметры БД.
3. Запустите Sail (Docker): `./vendor/bin/sail up -d`
4. Выполните миграции и сиды:`./vendor/bin/sail artisan migrate --seed`

## Использование API

Все запросы требуют передачи API-ключа в заголовке

### Основные маршруты

| Метод | Маршрут                                  | Описание                                      |
|-------|------------------------------------------|-----------------------------------------------|
| GET   | `/api/organizations`                     | Список организаций с фильтрами                |
| GET   | `/api/organizations/{id}`                | Информация об организации по ID               |

### Поддерживаемые query-параметры для `/api/organizations`

- `name` — поиск по названию организации  
- `activity_id` — фильтрация по виду деятельности (учитывает вложенность до 3 уровней)  
- `building_id` — фильтрация по зданию  
- `lat`, `lng`, `radius` — гео-фильтр по координатам и радиусу

## Документация API

Документация доступна через Swagger UI по адресу

## Тестовые данные

В базе изначально создаются:

- Несколько зданий с координатами
- Организации с несколькими телефонами, относящиеся к зданиям
- Виды деятельности с вложенностью до 3 уровней

## Контакты и поддержка

В случае вопросов обращайтесь к разработчику:  
Email: <ufamasters102@gmail.com>
GitHub: <https://github.com/ScriptSinger>
